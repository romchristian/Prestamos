<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:gpymes="http://java.sun.com/jsf/composite/gpymes">

    <ui:decorate template="/plantillaABMTPV.xhtml">

        <ui:param name="titulo" value="Resumen"/>


        <ui:define name="acciones">
            <p:outputPanel  styleClass="panelDatos" style="width: 100%;border: none!important;margin: 0!important;padding: 0!important;background: transparent!important;">
                <p:commandLink value="Confirmar" action="pagaCuota" 
                                styleClass="botonRojo flotaIzquierda" update="mensajes, panelControles"/>
                <p:commandButton value="Cancelar" action="endFlow"/>
            </p:outputPanel>

        </ui:define>


        <ui:define name="cabecera">

            <p:panel id="panelPagos">

                <div style="text-align: center; width: 100%;height: 100%;background-color: #ddd">
                    <br/>
                    <br/>
                    <br/>
                    <div style="font-size: 28pt; font-weight: bold">
                        <h:outputText value="#{cobraCuotaBean.facturaVenta.totalPagado}">
                            <f:convertNumber locale="#{formato.locale}"/>
                        </h:outputText>
                    </div>
                    <br/>
                    <p:panelGrid>
                        <h:outputText value="Elija un metodo de pago"/>
                        <p:selectOneMenu value="#{cobraCuotaBean.tipoPago}" >
                            <p:ajax listener="#{cobraCuotaBean.seleccionaTipoPago()}"/>
                            <f:selectItem itemValue="" itemLabel="--"/>
                            <f:selectItems value="#{productorEnums.obtTipoPago()}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>


                    <table style="width: 350px; margin: 0 auto 0 auto; ">
                        <tr>
                            <td style="width: 350px;" colspan="2">
                                <p:dataGrid value="#{cobraCuotaBean.facturaVenta.pagos}" var="p" style="background-color: #ddd;padding: 0;margin: 0;border:none;background: none;"
                                            columns="1">
                                    <div style="width: 350px;text-align: left;background-color: #ddd;padding: 0;margin: 0;">
                                        <h:outputText value="#{p.descripcion}"/>
                                        <h:outputText value="#{p.monto}" style="width: 350px"/>
                                    </div>
                                </p:dataGrid>
                            </td>
                        </tr>
                        <tr>
                            <td align="left">
                                <h:outputText value="Pagado: "/>
                            </td>
                            <td align="right">
                                <h:outputText value="50.000 G"/>
                            </td>
                        </tr>
                        <tr>
                            <td align="left">
                                <h:outputText value="Restante: "/>
                            </td>
                            <td align="right">
                                <h:outputText value="10.000 G"/>
                            </td>
                        </tr>
                        <tr>
                            <td align="left">
                                <h:outputText value="Cambio: "/>
                            </td>
                            <td align="right">
                                <h:outputText value="10.000 G"/>
                            </td>
                        </tr>
                    </table>   
                </div>
            </p:panel>



            <p:dialog id="dialogEfectivo" header="Pago Efectivo" showEffect="fade" widgetVar="dialogEfectivo"  resizable="false" position="center">
                <p:outputPanel id="cuotaPanelEfectivo">
                    <p:panelGrid  columns="2" columnClasses="label,value">
                        <h:outputLabel for="montoEfectivo" value="Monto: " />
                        <h:inputText id="montoEfectivo" value="#{cobraCuotaBean.efectivo.monto}" style="font-weight:bold" />


                    </p:panelGrid>

                    <p:commandButton actionListener="#{cobraCuotaBean.agregaEfectivo()}" value="#{bundle.Save}" update="panelPagos" oncomplete="handleSubmit(args,'dialogEfectivo');" />
                    <p:commandButton value="#{bundle.Cancel}" onclick="dialogEfectivo.hide()"/>
                </p:outputPanel>
            </p:dialog>
            
             <p:dialog id="dialogCheque" header="Pago Cheque" showEffect="fade" widgetVar="dialogCheque"  resizable="false" position="center">
                <p:outputPanel id="cuotaPanelCheque">
                    <p:panelGrid  columns="2" columnClasses="label,value">
                        <h:outputLabel for="montoCheque" value="Monto: " />
                        <h:inputText id="montoCheque" value="#{cobraCuotaBean.chequeRecibido.monto}" style="font-weight:bold" />
                        <h:outputLabel for="montoCheque" value="Monto: " />
                        <p:selectOneMenu id="banco" value="#{cobraCuotaBean.chequeRecibido.banco}" >
                            <f:selectItems value="#{bancoBean.itemsAvailableSelectOne}"
                                           var="bancoItem"
                                           itemValue="#{bancoItem}"/>
                        </p:selectOneMenu>
                        <h:outputLabel for="nroCheque" value="Nro. Cheque: " />
                        <h:inputText id="nroCheque" value="#{cobraCuotaBean.chequeRecibido.numero}" style="font-weight:bold" />
                        <h:outputLabel for="librador" value="Librador: " />
                        <h:inputText id="librador" value="#{cobraCuotaBean.chequeRecibido.librador}" style="font-weight:bold" />
                        <h:outputLabel for="vencimiento" value="vencimiento: " />                        
                        <p:calendar value="#{cobraCuotaBean.chequeRecibido.vencimiento}" id="vecimiento" required="true" style="font-weight:bold"
                                                pattern="#{formato.patronFecha}" locale="es"/>                        
                        <h:outputLabel for="descripcion" value="DescripciÃ³n: " />
                        <h:outputText id="descripcion" value="#{cobraCuotaBean.chequeRecibido.banco +" - "+cobraCuotaBean.chequeRecibido.numero+" - "+cobraCuotaBean.chequeRecibido.librador}" style="font-weight:bold" />

                    </p:panelGrid>

                    <p:commandButton actionListener="#{cobraCuotaBean.agregaEfectivo()}" value="#{bundle.Save}" update="panelPagos" oncomplete="handleSubmit(args,'dialogCheque');" />
                    <p:commandButton value="#{bundle.Cancel}" onclick="dialogCheque.hide()"/>
                </p:outputPanel>
            </p:dialog>


        </ui:define>
    </ui:decorate>
</ui:composition>
